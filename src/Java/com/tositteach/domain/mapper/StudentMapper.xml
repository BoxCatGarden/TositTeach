<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace = "com.tositteach.domain.mapper.StudentMapper">
    <resultMap id="studentMap" type="com.tositteach.domain.entity.Student">
        <id column="user_id" property="userId" jdbcType="VARCHAR"/>
        <result column="school" property="school" jdbcType="VARCHAR" />
        <result column="id" property="id" jdbcType="VARCHAR"/>
        <result column="name" property="name" jdbcType="VARCHAR"/>
        <result column="sex" property="sex" jdbcType="TINYINT"/>
        <result column="grade" property="grade" jdbcType="VARCHAR"/>
        <result column="cla_id" property="claId" jdbcType="VARCHAR"/>
        <result column="gro_id" property="groId" jdbcType="TINYINT"/>
    </resultMap>
    <select id="selectAllStudents" resultMap="studentMap">
        SELECT * FROM student;
    </select>
    <insert id="insertStudent" parameterType="com.tositteach.domain.entity.Student">
        INSERT INTO student(user_id,school,id,
                      name,sex,grade)
                      VALUES
          (#{userId},#{school},#{id},#{name},
          #{sex},#{grade})
    </insert>

    <update id="updateStudentClass" parameterType="com.tositteach.domain.entity.Student">
        UPDATE student
        SET cla_id=#{claId}
        WHERE user_id= #{userId}
    </update>

    <update id="updateStudentGroup" parameterType="com.tositteach.domain.entity.Student">
        UPDATE student
        SET gro_id = #{studGroup}
        WHERE user_id = #{userId} AND cla_id = #{claId}
    </update>

    <select id="selectStudentsByClassId" parameterType="String" resultMap="studentMap">
        SELECT * FROM student
        WHERE cla_id= #{claId}
    </select>

    <select id="selectStudentNoClass" resultMap="studentMap">
        SELECT * FROM student
        WHERE cla_id = NULL
    </select>

    <insert id="insertInfoBatch" parameterType="java.util.List">
        insert into salarymanage (user_id,school,id,
        name,sex,grade)
        values
        <foreach collection="list" item="item" index="index" separator=",">
            (#{item.userId}, #{item.school}, #{item.id},#{item.name},
            #{item.sex}, #{item.grade})
        </foreach>
    </insert>


</mapper>